/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{"use strict";var e={721:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(81),a=n.n(r),o=n(645),i=n.n(o)()(a());i.push([e.id,"/* http://meyerweb.com/eric/tools/css/reset/ \n   v2.0 | 20110126\n   License: none (public domain)\n*/\n\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed, \nfigure, figcaption, footer, header, hgroup, \nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, \nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}",""]);const s=i},599:(e,t,n)=>{n.d(t,{Z:()=>m});var r=n(81),a=n.n(r),o=n(645),i=n.n(o),s=n(667),c=n.n(s),d=new URL(n(35),n.b),l=new URL(n(796),n.b),p=i()(a());p.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&display=swap);"]);var u=c()(d),h=c()(l);p.push([e.id,':root {\n    --main-dark: #e2e8f0;\n    --main-medium: #f1f5f9;\n    --main-light: #f8fafc;\n    --accent-dark: #155e75;\n    --background-color: #52525b;\n    --box-shadow-color: rgba(124, 124, 124, 0.185);\n\n    /* colors for priorities */\n    --pHigh: tomato;\n    --pMed: plum;\n    --pLow: royalblue;\n\n    /* measurements for body */\n    --checkboxDimension: 1.5em;\n    --subtitlePadding: 1.5rem;\n    --sidebar-width: 200px;\n\n    --topbar-padding: 24px;\n    font-family: "Roboto";\n}\n\n.p-high {\n    background: var(--pHigh);\n}\n\n.p-medium {\n    background: var(--pMed);\n}\n\n.p-low {\n    background: var(--pLow);\n}\n\n* {\n    box-sizing: border-box;\n}\n\nimg {\n    user-select: none;\n}\n\ninput[type="checkbox"] {\n    cursor: pointer;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin: 0;\n    padding: 0;\n    appearance: none;\n    position: relative;\n    min-width: var(--checkboxDimension);\n    height: var(--checkboxDimension);\n    border: 2px solid gray;\n    border-radius: 6px;\n}\n\ninput[type="checkbox"]:checked::after {\n    display: block;\n    content: "";\n    width: 10px;\n    height: 10px;\n    background-color: gray;\n    border-radius: 3px;\n}\n\ninput[type="text"], input[type="date"], select {\n    background: var(--main-light);\n    padding: 6px;\n    font-size: 0.9rem;\n    border-radius: 4px;\n    border: 1px solid #d1d4d8;\n    width: 100%;\n}\n\ninput[type="text"]:focus, \ninput[type="text"]:focus-visible, \ninput[type="date"]:focus,\ninput[type="date"]:focus-visible,\nselect:focus,\nselect:focus-visible {\n    outline: 1px solid rgb(109, 156, 255);\n    box-shadow: 0 4px 8px 2px rgba(0, 0, 0, 0.096);\n}\n\ninput[type="date"] {\n    width: 9.5em;\n    min-width: 9.5em;\n}\n\ninput[placeholder="Task Name"] {\n    max-width: 12em;\n}\n\nselect {\n    max-width: 15em;\n    width: auto;\n}\n\nbutton {\n    box-sizing: border-box;\n    cursor: pointer;\n    font-size: 0.9rem;\n    padding: 7px 13px;\n    font-weight: 700;\n    outline: none;\n    border-radius: 500px;\n    background: var(--accent-dark);\n    border: 3px solid var(--accent-dark);\n    color: white;\n    white-space: pre;\n}\n\nbutton:hover {\n    color: var(--accent-dark);\n    background: var(--main-light);\n}\n\nbody {\n    min-height: 100vh;\n    background: var(--background-color);\n    position: relative;\n}\n\n.full-wrapper {\n    width: 100%;\n    margin: 0px clamp(20px, calc(20px + 20 * calc(1vw - 7px)), 100px);\n    margin-top: 20px;\n    border-radius: 8px 8px 0 0;\n    overflow: hidden;\n    box-shadow: 0 0 20px 10px rgba(39, 39, 39, 0.534);\n}\n\n.container {\n    display: flex;\n}\n\n.vertical {\n    flex-direction: column;\n}\n\n.sidebar.container {\n    width: var(--sidebar-width);\n    background: var(--main-dark);\n    z-index: 2;\n    padding: 10px;\n}\n\n.sidebar-section-header.container, .sidebar-section-project.container {\n    align-items: center;\n    font-size: 1.2rem;\n}\n\n.sidebar-section-header.container img, .sidebar-section-project.container img {\n    width: 1.3em;\n    height: 1.3em;\n    user-select: none;\n}\n\n.sidebar-section-header.container h3, .sidebar-section-project.container h4 {\n    margin-left: 0.2em;\n    margin-top: 0.12em;\n    font-size: 1rem;\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n}\n\n.sidebar-section-header.container h3 {\n    font-weight: bold;\n}\n\n.sidebar-section.container {\n    flex-direction: column;\n    gap: 2px;\n    cursor: pointer;\n}\n\n.sidebar-section-project.container, .sidebar-section-header.container {\n    padding: 3px;\n    border-radius: 8px;\n}\n\n.sidebar-section-header.container {\n    margin-top: 20px;\n    margin-bottom: 5px;\n    border: 1px solid #4445;\n}\n\n.sidebar-section-project.container.selected {\n    background: #4445;\n}\n\n.sidebar-section-project.container:not(.selected):hover {\n    background: #4442;\n}\n\n.sidebar-section-project.container:hover {\n    filter: brightness(0.2);\n}\n\n.main.container {\n    flex: 1;\n    max-width: calc(100% - var(--sidebar-width));\n}\n\n.topbar.container {\n    height: 100px;\n    background: var(--main-light);\n    justify-content: space-between;\n    align-items: center;\n    gap: 20px;\n    padding: 0 var(--topbar-padding);\n    box-shadow: 0 2px 4px 2px var(--box-shadow-color);\n    z-index: 1;\n}\n\n.topbar-title.container {\n    justify-content: center;\n    align-items: center;\n}\n\nh1.topbar-title {\n    font-size: 2.5rem;\n    font-weight: 500;\n    white-space: nowrap;\n}\n\n.topbar-buttons.container {\n    gap: 20px;\n}\n\n.main-content.container {\n    flex: 1;\n    background: var(--main-medium);\n    padding: 40px;\n}\n\n.main-content.title {\n    display: inline;\n    font-size: 1.5rem;\n    margin-bottom: 20px;\n    font-weight: 500;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.main-content-wrapper {\n    padding-right: 40px;\n    gap: 0.5rem;\n}\n\n.project-title-button {\n    border-radius: 0;\n    padding: 0;\n    margin: 0;\n    border: none;\n    width: 1.5rem;\n    height: 1.5rem;\n    -webkit-mask: url('+u+") 0 0 / 100% 100%;\n    mask: url("+u+") no-repeat center;\n    background: black;\n}\n\n.project-title-button:hover {\n    background: gray;\n}\n\n.main-content.body {\n    color: #777;\n}\n\n.task-list.container {\n    max-width: 450px;\n}\n\n.task-header.container {\n    align-items: center;\n    gap: 0.3em;\n}\n\n.task-header.container img {\n    width: 1.5rem;\n}\n\n.task-header.title {\n    flex: 1;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.task-priority {\n    cursor: pointer;\n    width: 1.5rem;\n    height: 1.5rem;\n    -webkit-mask: url("+h+") 0 0 / 100% 100%;\n    mask: url("+h+") no-repeat center;\n}\n\n.task-priority.hover {\n    -webkit-mask: url("+u+") 0 0 / 100% 100%;\n    mask: url("+u+") no-repeat center;\n    background: black;\n}\n\n.task-priority.hover:hover {\n    background: gray;\n}\n\n.task-proj-name {\n    padding-left: var(--subtitlePadding);\n    font-size: 0.8rem;\n    display: none;\n}\n\n.task-proj-name.hover {\n    display: block;\n}\n\n.task.container {\n    padding: 4px;\n    border-radius: 8px;\n}\n\n.task.container:hover {\n    background: #4442;\n}\n\n.task.container p {\n    padding-top: 0.2em;\n    padding-left: var(--subtitlePadding);\n    color: #777;\n    width: calc(100%);\n}\n\n.task-desc, .task-date {\n    font-size: 0.8rem;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.task-date {\n    max-width: 20em;\n}\n\n.task-desc {\n    display: -webkit-box;\n    -webkit-line-clamp: 3;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.task-divider {\n    border-style: none;\n    border-top: 1px solid #DDDDDD;\n    margin: 6px 0;\n    width: 100%;\n}\n\n.completed {\n    opacity: 40%;\n}\n\n.prompt-wrapper {\n    z-index: 2;\n}\n\n.prompt-remover {\n    position: absolute;\n    backdrop-filter: brightness(85%);\n    inset: 0;\n}\n\n.prompt.container {\n    background: var(--main-dark);\n    padding: 20px 20px;\n    border-radius: 8px;\n    box-shadow: 0 0 4px 4px var(--box-shadow-color);\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n    margin: auto;\n}\n\n.prompt-title {\n    font-size: 1.5rem;\n    font-weight:  bold;\n    margin-bottom: 13px;\n    margin-left: 3px;\n}\n\n.prompt-form {\n    gap: 10px;\n}\n\n.prompt-row {\n    gap: 10px;\n}\n\n.prompt-final-row {\n    justify-content: flex-end;\n}\n\nselect.priority {\n    width: 10rem;\n}",""]);const m=p},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var d=0;d<e.length;d++){var l=[].concat(e[d]);r&&i[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),a&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=a):l[4]="".concat(a)),t.push(l))}},t}},667:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},i=[],s=0;s<e.length;s++){var c=e[s],d=r.base?c[0]+r.base:c[0],l=o[d]||0,p="".concat(d," ").concat(l);o[d]=l+1;var u=n(p),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)t[u].references++,t[u].updater(h);else{var m=a(h,r);r.byIndex=s,t.splice(s,0,{identifier:p,updater:m,references:1})}i.push(p)}return i}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var o=r(e=e||[],a=a||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var s=n(o[i]);t[s].references--}for(var c=r(e,a),d=0;d<o.length;d++){var l=n(o[d]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}o=c}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},35:(e,t,n)=>{e.exports=n.p+"3270f2c93c8c138fa6cc.svg"},796:(e,t,n)=>{e.exports=n.p+"13d16c7d5614f1c795fc.svg"}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{var e=n(379),t=n.n(e),r=n(795),a=n.n(r),o=n(569),i=n.n(o),s=n(565),c=n.n(s),d=n(216),l=n.n(d),p=n(589),u=n.n(p),h=n(721),m={};m.styleTagTransform=u(),m.setAttributes=c(),m.insert=i().bind(null,"head"),m.domAPI=a(),m.insertStyleElement=l(),t()(h.Z,m),h.Z&&h.Z.locals&&h.Z.locals;var g=n(599),b={};b.styleTagTransform=u(),b.setAttributes=c(),b.insert=i().bind(null,"head"),b.domAPI=a(),b.insertStyleElement=l(),t()(g.Z,b),g.Z&&g.Z.locals&&g.Z.locals;const f=n.p+"6e93938839cb814ff0a3.svg",v=n.p+"254fbe9e517b0a350b26.svg";class k{constructor(e,t,n,r,a,o){this.name=t,this.date=new Date(n.replace(/-/g,"/")),this.description=r,this.priority=a,this.checked=o,this.id=k.generateId(),this.project=e}static idGenerator=0;static generateId(){return this.idGenerator+=1,this.idGenerator}}function w(){return(new Date).toLocaleDateString("en-CA")}function x(){let e=new Date;return e.setDate(e.getDate()+1),e.toLocaleDateString("en-CA")}function j(e){if(e.toLocaleDateString("en-CA")==w())return"today";if(e.toLocaleDateString("en-CA")==x())return"tomorrow";let t=new Date;if(e.getFullYear()==t.getFullYear()){let t={month:"short",day:"numeric"};return e.toLocaleDateString("en-US",t)}{let t={month:"short",day:"numeric",year:"numeric"};return e.toLocaleDateString("en-US",t)}}class y{constructor(e,t,n){if(this.name=e,this.projectsManager=t,n&&n.length>0){this._tasks=[];for(let e=0;e<n.length;e++){let t=n[e],r=t.date,a=new Date(r);this._tasks.push(new k(this,t.name,a.toLocaleDateString("en-CA"),t.description,t.priority,t.checked))}}else this._tasks=[]}static specialProjects=["Today","This Week","All Tasks","Uncategorized"];get tasks(){if(y.specialProjects.includes(this.name)&&"Uncategorized"!=this.name){let e=this.projectsManager.getAllTasks();if("All Tasks"===this.name)return e;if("Today"===this.name)return e.filter((e=>e.date.toLocaleDateString("en-CA")===w()));if("This Week"===this.name){let t=new Date(w().replace(/-/g,"/")),n=function(){let e=new Date;for(;e.getDay()<6;)e.setDate(e.getDate()+1);return new Date,e}();return e.filter((e=>e.date>=t&&e.date<=n))}return[]}return this._tasks}add(e){return this._tasks.push(e),e}addNew(e,t,n,r,a){return this._tasks.push(new k(this,e,t,n,r,a)),this._tasks[this._tasks.length-1]}remove(e){let t=this._tasks.indexOf(e);return-1!=t&&this._tasks.splice(t,1),e}}const P=n.p+"6159865ea9c8d3e4ccd0.svg",T=n.p+"b7fbf4b82de02c03c144.svg",L=n.p+"4dd17ccf1b5099e08cf3.svg",E=n.p+"db880e01a83d878a9455.svg";class S{constructor(e){this.root=document.querySelector(".sidebar.container"),this.content=[],this.eventHandler=e,this.generateSkeleton()}static specialImages={Today:P,"This Week":T,"All Tasks":L};render(e){for(let e in this.containers){let t=this.containers[e];for(;t.firstChild;)t.removeChild(t.firstChild)}e.projects.forEach((e=>{if("Uncategorized"!=e.name)if(y.specialProjects.includes(e.name)){let t=this.createProject(e.name,S.specialImages[e.name],"inbox",this.eventHandler);this.containers.inbox.append(t),e.name==this.selectectedProject&&t.classList.add("selected")}else{let t=this.createProject(e.name,E,"projects",this.eventHandler);this.containers.projects.append(t),e.name==this.selectectedProject&&t.classList.add("selected")}})),this.content.forEach((e=>{this.root.append(e)}))}generateSkeleton(){let e,t,n,r;[e,n]=this.createSection("Inbox",f),this.content.push(e,n),[t,r]=this.createSection("Projects",v),this.content.push(t,r),this.userProjectsByName={},this.containers={inbox:n,projects:r}}createSection(e,t){let n=this.createSectionHeader(e,t),r=document.createElement("div");return r.classList.add("sidebar-section","container"),[n,r]}createSectionHeader(e,t){let n=document.createElement("div");n.classList.add("sidebar-section-header","container");let r=document.createElement("img");r.setAttribute("src",t);let a=document.createElement("h3");return a.innerText=e,n.append(r,a),n}createProject(e,t,n,r){let a=document.createElement("div");a.classList.add("sidebar-section-project","container"),a.setAttribute("data-name",e);let o=document.createElement("img");o.setAttribute("src",t);let i=document.createElement("h4");return i.innerText=e,a.append(o,i),a.addEventListener("click",(t=>{r.clickProject(e)})),this.containers[n].append(a),a}selectProject(e){this.selectectedProject=e;for(const t in this.containers)for(const n of this.containers[t].children)n.getAttribute("data-name")===e?n.classList.add("selected"):n.classList.remove("selected")}removeProject(e){for(let t of this.containers.projects.children)t.getAttribute("data-name")===e&&this.containers.projects.removeChild(t)}}class D{constructor(e){this.specialProjects=["Today","This Week","All Tasks"],this.root=document.querySelector(".main-content.container"),this.eventHandler=e}render(e){let t=this.createTitleElement(e),n=this.createTasksElement(e);this.root.replaceChildren(t,n)}createTitleElement(e){let t=document.createElement("div");t.classList.add("main-content-wrapper","container");let n=document.createElement("h2");if(n.classList.add("main-content","title"),n.innerText=e.name,t.append(n),!y.specialProjects.includes(e.name)){let n=document.createElement("button");n.classList.add("project-title-button"),t.append(n),n.addEventListener("click",(t=>{this.eventHandler.removeProject(e.name)}))}return t}createTasksElement(e){let t=document.createElement("div");t.classList.add("task-list","container","vertical");let n=e.tasks;if(0==n.length)return t.innerText="No tasks assigned yet.",t;for(let e=0;e<n.length;e++)e>0&&t.append(this.createTaskDivider()),t.appendChild(this.createTaskElement(n[e]));return t}createTaskElement(e){let t=document.createElement("div");t.classList.add("task","container","vertical");let n=document.createElement("div");n.classList.add("task-header","container");let r=document.createElement("input");r.setAttribute("type","checkbox");let a=document.createElement("h4");a.innerText=e.name,a.classList.add("task-header","title");let o=document.createElement("span");o.innerText=j(e.date),o.classList.add("task-date");let i=document.createElement("div");if(i.classList.add("task-priority"),i.classList.add("p-"+e.priority),n.append(r,a,o,i),t.append(n),e.description){let n=document.createElement("p");n.innerText=e.description,n.classList.add("task-desc"),t.append(n)}return e.checked&&(t.classList.add("completed"),r.checked=!0),t.addEventListener("mouseenter",(t=>{i.classList.add("hover"),o.innerText=e.project.name})),t.addEventListener("mouseleave",(t=>{i.classList.remove("hover"),o.innerText=j(e.date)})),i.addEventListener("click",(t=>{this.eventHandler.deleteTask(e)})),r.addEventListener("click",(n=>{t.classList.toggle("completed"),e.checked=!e.checked,this.eventHandler.updateLocalStorage()})),t}createTaskDivider(){let e=document.createElement("hr");return e.classList.add("task-divider"),e}}class A{constructor(e){this.root=document.body,this.eventHandler=e}buildPromptBase(){let e=document.createElement("div");e.classList.add("prompt-wrapper");let t=document.createElement("div");t.classList.add("prompt-remover"),t.addEventListener("click",(t=>{e.remove()}));let n=document.createElement("div");return n.classList.add("prompt","container","vertical"),e.append(t,n),[e,n]}buildPromptTitle(e){let t=document.createElement("h2");return t.innerText=e,t.classList.add("prompt-title"),t}buildNewProjectPrompt(){let[e,t]=this.buildPromptBase();t.append(this.buildPromptTitle("New Project"));let n=document.createElement("form");n.classList.add("prompt-form","container"),t.append(n);let r=this.makeTextInput("Project Name",!0),a=this.makeButton("Add Project");n.append(r,a),r.addEventListener("input",(e=>{let t=this.eventHandler.contestProjectName(r.value);r.setCustomValidity(t)})),a.addEventListener("click",(t=>{r.validity.valid&&(t.preventDefault(),this.eventHandler.contestProjectName(r.value)||(this.eventHandler.addProject(r.value,null,"projects"),e.remove()))})),this.root.append(e)}buildNewTaskPrompt(e,t){let[n,r]=this.buildPromptBase();r.append(this.buildPromptTitle("New Task"));let a=document.createElement("form");a.classList.add("prompt-form","container","vertical"),r.append(a);let o=[];for(let e=0;e<3;e++)o.push(document.createElement("div")),o[e].classList.add("prompt-row","container"),a.append(o[e]);let i=this.makeTextInput("Task Name",!0),s=this.makeDateInput("Date",!0),c=this.makeDropdownIput(!0,!0,"--Priority--","High","Medium","Low");c.classList.add("priority"),o[0].append(i,s,c);let d=this.makeTextInput("Description (optional)"),l=t.map((e=>e.name));l=l.concat(["Uncategorized"]);let p=this.makeDropdownIput(!0,!1,"--Project--",...l);p.childNodes.forEach((t=>{t.innerText==e.name&&t.setAttribute("selected","")})),o[1].append(d,p);let u=this.makeButton("Add Task");u.addEventListener("click",(e=>{i.validity.valid&&s.validity.valid&&c.validity.valid&&p.validity.valid&&(e.preventDefault(),this.eventHandler.addTask(p.value,i.value,s.value,d.value,c.value),n.remove())})),o[2].append(u),o[2].classList.add("prompt-final-row"),this.root.append(n)}makeTextInput(e,t){let n=document.createElement("input");return n.classList.add("prompt","input"),n.setAttribute("placeholder",e),n.setAttribute("type","text"),t&&n.setAttribute("required",""),n}makeDateInput(e,t){let n=document.createElement("input");if(n.classList.add("prompt","input"),n.setAttribute("type","date"),t){let e=new Date;n.value=e.toLocaleDateString("en-CA")}return n.setAttribute("required",""),n}makeDropdownIput(e,t,n,...r){let a=document.createElement("select");if(n){let e=document.createElement("option");e.setAttribute("value",""),e.innerText=n,a.append(e)}for(let e of r){let n=document.createElement("option");t?n.setAttribute("value",e.toLowerCase()):n.setAttribute("value",e),n.innerText=e,a.append(n)}return e&&a.setAttribute("required",""),a}makeButton(e){let t=document.createElement("button");return t.innerText=e,t}}class _{constructor(e){if(e){this._projects=[];for(let t=0;t<e._projects.length;t++){let n=e._projects[t];this._projects.push(new y(n.name,this,n._tasks))}}else this._projects=[]}get projects(){return this._projects}addProject(e){for(const t of this._projects)if(t.name===e)return!1;return this._projects.push(new y(e,this)),this._projects[this._projects.length-1]}removeProject(e){for(let t=0;t<this._projects.length;t++)if(this._projects[t].name===e)return void this._projects.splice(t,1)}getProject(e){for(let t=0;t<this._projects.length;t++)if(this._projects[t].name===e)return this._projects[t];return!1}getInboxProjects(){let e=y.specialProjects;return this._projects.filter((t=>e.includes(t.name)))}getUserProjects(){let e=y.specialProjects;return this._projects.filter((t=>!e.includes(t.name)))}getAllTasks(){let e=[],t=this.getUserProjects();t.concat([this.getProject("Uncategorized")]);let n=this.getProject("Uncategorized");return t=t.concat([n]),t.forEach((t=>{e=e.concat(t.tasks)})),e}}const{parse:M,stringify:C}=JSON,{keys:I}=Object,N=String,z={},H=(e,t)=>t,U=e=>e instanceof N?N(e):e,q=(e,t)=>"string"==typeof t?new N(t):t,O=(e,t,n,r)=>{const a=[];for(let o=I(n),{length:i}=o,s=0;s<i;s++){const i=o[s],c=n[i];if(c instanceof N){const o=e[c];"object"!=typeof o||t.has(o)?n[i]=r.call(n,i,o):(t.add(o),n[i]=z,a.push({k:i,a:[e,t,o,r]}))}else n[i]!==z&&(n[i]=r.call(n,i,c))}for(let{length:e}=a,t=0;t<e;t++){const{k:e,a:o}=a[t];n[e]=r.call(n,e,O.apply(null,o))}return n},R=(e,t,n)=>{const r=N(t.push(n)-1);return e.set(n,r),r},Z=(e,t,n)=>{const r=t&&"object"==typeof t?(e,n)=>""===e||-1<t.indexOf(e)?n:void 0:t||H,a=new Map,o=[],i=[];let s=+R(a,o,r.call({"":e},"",e)),c=!s;for(;s<o.length;)c=!0,i[s]=C(o[s++],d,n);return"["+i.join(",")+"]";function d(e,t){if(c)return c=!c,t;const n=r.call(this,e,t);switch(typeof n){case"object":if(null===n)return n;case"string":return a.get(n)||R(a,o,n)}return n}};class B{constructor(e){e?(this.projectsManager=new _(e.projectsManager),this.domSidebar=new S(this),this.domMainContent=new D(this),this.domPrompts=new A(this)):(this.projectsManager=new _,this.domSidebar=new S(this),this.domMainContent=new D(this),this.domPrompts=new A(this),this.addProject("Uncategorized",null,"hidden"),this.addProject("Today",P,"inbox"),this.addProject("This Week",T,"inbox"),this.addProject("All Tasks",L,"inbox")),this.clickProject("Today"),this.domSidebar.render(this.projectsManager)}makeSampleProject(){this.addProject("Sample Project",null,"projects")}updateLocalStorage(){localStorage.setItem("eventHandler",Z(this))}addProject(e,t,n){this.projectsManager.addProject(e)||console.log("This should never happen!"),"Uncategorized"!==e&&(this.domSidebar.render(this.projectsManager),this.updateLocalStorage())}removeProject(e){this.domSidebar.removeProject(e),this.projectsManager.removeProject(e),this.domSidebar.render(this.projectsManager),this.clickProject("Today"),this.updateLocalStorage()}clickProject(e){this.currentProject=this.projectsManager.getProject(e),this.domSidebar.selectProject(e),this.domMainContent.render(this.currentProject)}addTask(e,t,n,r,a){this.projectsManager.getProject(e).addNew(t,n,r,a,!1),this.domMainContent.render(this.currentProject),this.updateLocalStorage()}deleteTask(e){e.project.remove(e),this.domMainContent.render(this.currentProject),this.updateLocalStorage()}contestProjectName(e){return y.specialProjects.includes(e)?"You cannot create a project with that name.":this.projectsManager.projects.some((t=>t.name==e))?"There is already a project with that name!":""}promptNewProject(){this.domPrompts.buildNewProjectPrompt()}promptNewTask(){this.domPrompts.buildNewTaskPrompt(this.currentProject,this.projectsManager.getUserProjects())}}let W;if(function(e){let t;try{t=window.localStorage;const e="__storage_test__";return t.setItem(e,e),t.removeItem(e),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}())if(null!==localStorage.getItem("eventHandler")){let e=localStorage.getItem("eventHandler");W=new B(((e,t)=>{const n=M(e,q).map(U),r=n[0],a=t||H,o="object"==typeof r&&r?O(n,new Set,r,a):r;return a.call({"":o},"",o)})(e))}else W=new B,F();else W=new B,F();function F(){W.makeSampleProject(),W.addTask("Sample Project","Make Dinner",w(),null,"high"),W.addTask("Sample Project","Laundry",x(),null,"medium"),W.addTask("Sample Project","Work Meeting","2022-12-15","Held at 2pm, should take about 1 hour","high"),W.addTask("Uncategorized","An Uncategorized Task",w(),"This task is not categorized under any particular project.","low")}document.querySelector(".new-project-button").addEventListener("click",(e=>{W.promptNewProject()})),document.querySelector(".new-task-button").addEventListener("click",(e=>{W.promptNewTask()}))})()})();